<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xml:space="preserve"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xqDoc -- Module</title><script language="JavaScript"><!--
        function popUp(URL) {
                 day = new Date();
                 id = day.getTime();
                 eval("page = window.open(URL, 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');")
                 page.focus();
        }
      --></script><script language="JavaScript"><!--
	    function litePopUp(str) {    
  		  OpenWindow=window.open('', 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');
  		  OpenWindow.document.write('<html xmlspace="preserve">');
  		  OpenWindow.document.write('<head>');
  		  OpenWindow.document.write('<title>xqDoc - Code Sample</title>');
  		  OpenWindow.document.write('</head>');  		    		    		  
  		  OpenWindow.document.write('<body xml:space="preserve">');
  		  OpenWindow.document.write('<pre>');
 		  OpenWindow.document.write(str);
 		  OpenWindow.document.write('</pre>');
  		  OpenWindow.document.write('</body>');
  		  OpenWindow.document.write('</html>');
  		  OpenWindow.document.close();
  		  page.focus();
        }
      --></script><style><!--
body		{
		font: 80% Verdana;
		}
table		{
		font-size: 100%;
		}
h1, h2, h3, h4, h5, h6
		{
		clear: both;
		float: none;
		}
h1		{
		font-size: 100%;
		margin: 0em;
		}
h2		{
		font-size: 180%;
		margin-bottom: -1em;
		margin-top: .3em;
		}
h3		{
		font-size: 150%;
		}	
h4		{
		font-size: 140%;
		background-color: #ccf;
		border-bottom: 1px solid #99f;
		width: 100%;
		}
h5		{
		margin: 1em 0em 0em 0em;
		font-size: 120%;
		}
h6		{
		margin: 0em 0em 0em 3em;
		font-style: italic;
		font: bold italic;
		font-size: 100%;
		}
#variables, #methods, #methoddetail
		{
		padding-left: 3em;
		margin-bottom: 1.4em;
		clear: both;
		float: none;
		}
#methods ul.method, #variables ul.method
		{
		margin: 1em 0em 0em;
		}
#methoddetail ul.method
		{
		margin: 0em;
		}
div.inexternal
		{
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail p
		{
		float: none;
		clear: both;
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail{
		padding-bottom: 1em;
		}
div.methoddetail li
		{
		list-style-type: none;
		font-weight: bold;
		}
div.methoddetail li li
		{
		list-style-type: circle;
		font-weight: normal;
		}
div.methoddetail li ul
		{
		padding-bottom: 0.5em;
		font-weight: normal;
		}
table.inexternal{
		clear: both;
		float: none;
		width: 80%;
		margin-left: 3em;
		padding: 0em;
		
		}
table.inexternal th
		{
		background-color:#dedede;
		width: 50%;
		}			
td		{
		vertical-align: top;
		}
div.description {
		margin-top: .5em;
		font-weight: normal;
		padding-left: 1em;
		}
ul.method	{
		clear: both;
		float: none;
		width: 90%;
		list-style-type: none;
		border-top: 1px solid #ccc;
		}
ul.method li.left
		{
		float: left;
		clear: none;
		width: 40%;
		font-weight: bold;
		margin-bottom: 2em;
		}
ul.method li.right
		{
		position: relative;
            top: 0em;
		float: left;
            width: 55%;
		margin-bottom: 2em;
		padding-left: 2em;
		}
div.home 	{
		width: 60%;
		float: left;
		margin-right: 1%;
		border: 1px
		}
div.home h4	{
		font-size: 120%;
		background-color: #fff;
		border-bottom: 1px solid #99f;
		width: 100%;
		margin-bottom: -1em;
		}
div.overview p {
               width: 60%;
               }
     
 --></style></head><body><h4>Module URI</h4><h1>http://www.zorba-xquery.com/modules/data-extraction</h1><h4>Module Description</h4><p> This library module provides data extraction functions that return a list   of entities, relations, categories and concepts present in a given text.</p><ul><li><strong>Author:&nbsp;</strong> Pedro Antunes @project information extraction </li></ul>&nbsp;<h4>Imported Modules</h4><div id="imports"><div><ul class="method"><li class="left">http://www.zorba-xquery.com/modules/http-client</li><li class="right"></li></ul><ul></ul></div></div>&nbsp;<h4>Function Summary</h4><div id="methods"><a name="methods"></a><ul class="method"><li class="left"><a href="#categories">categories</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of categories  encountered in the xml or text supplied as input.</div></li><li class="right">( $text)<br><br></li></ul><ul class="method"><li class="left"><a href="#concept-inline-annotation">concept-inline-annotation</a><div class="description"> Creates concepts inline annotations in a given string</div></li><li class="right">( $text ,<br>&nbsp; $concepts ,<br>&nbsp; $size)<br><br></li></ul><ul class="method"><li class="left"><a href="#concepts">concepts</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of concepts  encountered in the xml or text supplied as input.</div></li><li class="right">( $text)<br><br></li></ul><ul class="method"><li class="left"><a href="#concepts-inline">concepts-inline</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of concepts (as inline annotations)  encountered in the xml or text supplied as input.</div></li><li class="right">( $text)<br><br></li></ul><ul class="method"><li class="left"><a href="#entities">entities</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of entities  encountered in the xml or text supplied as input.</div></li><li class="right">( $text as xs:string)<br><br></li></ul><ul class="method"><li class="left"><a href="#entities-inline">entities-inline</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of entities (as inline annotations) encountered in the xml or text supplied as input.</div></li><li class="right">( $text)<br><br></li></ul><ul class="method"><li class="left"><a href="#entity-inline-annotation">entity-inline-annotation</a><div class="description"> Creates entities inline annotations in a given string</div></li><li class="right">( $text ,<br>&nbsp; $entities ,<br>&nbsp; $size)<br><br></li></ul><ul class="method"><li class="left"><a href="#relations">relations</a><div class="description"> Uses Yahoo's Content Analysis webservice to return a list of relations  between entities encountered in the xml or text supplied as input.</div></li><li class="right">( $text)<br><br></li></ul></div>&nbsp;<h4>Function Detail</h4><div id="methoddetail"><div id="categories" class="methoddetail"><h5><a name="categories"></a>categories</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:categories($text){<br/&gt;    let $uri := concat(&#34;http://query.yahooapis.com/v1/public/yql?q=&#34;, <br/&gt;        encode-for-uri(concat(&#34;select * from contentanalysis.analyze where text=&#34;, concat(&amp;apos;&#34;&amp;apos;, concat($text, &amp;apos;&#34;&amp;apos;)))))<br/&gt;    let $response := http:post($uri,&#34;&#34;)[2]<br/&gt;    let $categories := $response/*:query/*:results/*:yctCategories/*:yctCategory<br/&gt;    return if ($categories) then &amp;lt;ex:categories&amp;gt;{<br/&gt;        for $category in $categories<br/&gt;        return &amp;lt;ex:category&amp;gt; {$category/text()} &amp;lt;/ex:category&amp;gt;<br/&gt;    }&amp;lt;/ex:categories&amp;gt; else ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of categories  encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of categories recognized @example test/Queries/data-extraction/categories.xq </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/http-client</td><td>post</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">none</td><td>concat</td></tr><tr><td>encode-for-uri</td></tr></table></div></div>&nbsp;<div id="concept-inline-annotation" class="methoddetail"><h5><a name="concept-inline-annotation"></a>concept-inline-annotation</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:concept-inline-annotation($text, $concepts, $size){<br/&gt;    if( count($concepts) = 0 ) then ($text) <br/&gt;    else ( substring($text, 0, ( $concepts[1]/*:entity/@start) +1 -$size),  if ($concepts[1]/ex:wikipedia_url) then<br/&gt;        &amp;lt;entity start=&#34;{$concepts[1]/ex:entity/@start}&#34; end=&#34;{$concepts[1]/ex:entity/@end}&#34; url=&#34;{$concepts[1]/ex:wikipedia_url/text()}&#34;&amp;gt;{$concepts[1]/ex:entity/text()}&amp;lt;/entity&amp;gt;<br/&gt;        else ($concepts[1]/ex:entity) ,<br/&gt;        ex:concept-inline-annotation(substring($text, ($concepts[1]/ex:entity/@end) +2 -$size), $concepts[position() &amp;gt;1], ($concepts[1]/ex:entity/@end) +1))<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text ,<br>&nbsp; $concepts ,<br>&nbsp; $size)<br><br></li></ul><p> Creates concepts inline annotations in a given string</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li><li>$concepts - list of concepts found in the given string<br></li><li>$size - size of the remaining string<br></li></ul><li>Return:</li><ul><li> XML document with a list of concepts recognized </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">none</td><td>count</td></tr><tr><td>position</td></tr><tr><td>substring</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#concept-inline-annotation">concept-inline-annotation</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#concept-inline-annotation">concept-inline-annotation</a></td></tr><tr><td><a href="#concepts-inline">concepts-inline</a></td></tr></table></div></div>&nbsp;<div id="concepts" class="methoddetail"><h5><a name="concepts"></a>concepts</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:concepts($text){<br/&gt;    let $uri := concat(&#34;http://query.yahooapis.com/v1/public/yql?q=&#34;, <br/&gt;        encode-for-uri(concat(&#34;select * from contentanalysis.analyze where text=&#34;, concat(&amp;apos;&#34;&amp;apos;, concat($text, &amp;apos;&#34;&amp;apos;)))))<br/&gt;    let $response := http:post($uri,&#34;&#34;)[2]<br/&gt;    let $concepts := $response/query/results/*:entities/*:entity/*:wiki_url<br/&gt;    return if ($concepts) then &amp;lt;ex:concepts&amp;gt;{<br/&gt;        for $link in $concepts<br/&gt;        let $entity := $link/..<br/&gt;        let $type := <br/&gt;            for $type in $entity/*:types/*:type<br/&gt;            return substring($type, 2)<br/&gt;        order by xs:integer($entity/*:text/@start)<br/&gt;        return &amp;lt;ex:concept&amp;gt;{<br/&gt;            (if ($entity/*:types) then &amp;lt;ex:entity start=&#34;{$entity/*:text/@start}&#34; end=&#34;{$entity/*:text/@end}&#34; type=&#34;{$type}&#34;&amp;gt; {$entity/*:text/text()} &amp;lt;/ex:entity&amp;gt;<br/&gt;            else &amp;lt;ex:entity start=&#34;{$entity/*:text/@start}&#34; end=&#34;{$entity/*:text/@end}&#34;&amp;gt; {$entity/*:text/text()} &amp;lt;/ex:entity&amp;gt;) <br/&gt;            union <br/&gt;            (if ($link) then <br/&gt;            &amp;lt;ex:wikipedia_url&amp;gt;{$link[1]/text()}&amp;lt;/ex:wikipedia_url&amp;gt; else ())<br/&gt;        }&amp;lt;/ex:concept&amp;gt;<br/&gt;    }&amp;lt;/ex:concepts&amp;gt; else ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of concepts  encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of concepts recognized @example test/Queries/data-extraction/concepts.xq </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/http-client</td><td>post</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">none</td><td>concat</td></tr><tr><td>encode-for-uri</td></tr><tr><td>substring</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#concepts-inline">concepts-inline</a></td></tr></table></div></div>&nbsp;<div id="concepts-inline" class="methoddetail"><h5><a name="concepts-inline"></a>concepts-inline</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:concepts-inline($text){<br/&gt;   &amp;lt;ex:concepts&amp;gt;{ex:concept-inline-annotation($text , ex:concepts($text)//ex:concept, 0)}&amp;lt;/ex:concepts&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of concepts (as inline annotations)  encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of concepts recognized @example test/Queries/data-extraction/concepts-inline.xq </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#concept-inline-annotation">concept-inline-annotation</a></td></tr><tr><td><a href="#concepts">concepts</a></td></tr></table></div></div>&nbsp;<div id="entities" class="methoddetail"><h5><a name="entities"></a>entities</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:entities($text as xs:string){<br/&gt;    let $uri := concat(&#34;http://query.yahooapis.com/v1/public/yql?q=&#34;, <br/&gt;        encode-for-uri(concat(&#34;select * from contentanalysis.analyze where text=&#34;, concat(&amp;apos;&#34;&amp;apos;, concat($text, &amp;apos;&#34;&amp;apos;)))))<br/&gt;    let $response := http:post($uri,&#34;&#34;)[2]<br/&gt;    let $entities := $response/*:query/*:results/*:entities/*:entity<br/&gt;    return if($entities) then &amp;lt;ex:entities&amp;gt;{<br/&gt;        for $entity in $entities<br/&gt;        let $type := <br/&gt;            for $type in $entity/*:types/*:type<br/&gt;            return substring($type, 2)<br/&gt;        order by xs:integer($entity/*:text/@start)<br/&gt;        return if($entity/*:types) then<br/&gt;            &amp;lt;ex:entity start=&#34;{$entity/*:text/@start}&#34; end=&#34;{$entity/*:text/@end}&#34; type=&#34;{$type}&#34;&amp;gt; {$entity/*:text/text()} &amp;lt;/ex:entity&amp;gt;<br/&gt;            else &amp;lt;ex:entity start=&#34;{$entity/*:text/@start}&#34; end=&#34;{$entity/*:text/@end}&#34;&amp;gt; {$entity/*:text/text()} &amp;lt;/ex:entity&amp;gt;<br/&gt;    }&amp;lt;/ex:entities&amp;gt; else ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text as xs:string)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of entities  encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML entity or a string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of entities recognized @example test/Queries/data-extraction/entities.xq </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/http-client</td><td>post</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">none</td><td>concat</td></tr><tr><td>encode-for-uri</td></tr><tr><td>substring</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#entities-inline">entities-inline</a></td></tr></table></div></div>&nbsp;<div id="entities-inline" class="methoddetail"><h5><a name="entities-inline"></a>entities-inline</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:entities-inline($text){<br/&gt;   &amp;lt;ex:entities&amp;gt;{ex:entity-inline-annotation($text , ex:entities($text)//ex:entity, 0)}&amp;lt;/ex:entities&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of entities (as inline annotations) encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML entity or a string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of entities recognized @example test/Queries/data-extraction/entities-inline.xq </li></ul></ul><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#entities">entities</a></td></tr><tr><td><a href="#entity-inline-annotation">entity-inline-annotation</a></td></tr></table></div></div>&nbsp;<div id="entity-inline-annotation" class="methoddetail"><h5><a name="entity-inline-annotation"></a>entity-inline-annotation</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:entity-inline-annotation($text, $entities, $size){<br/&gt;    if(count($entities)=0) then $text <br/&gt;    else(substring($text, 0, ($entities/@start)[1] +1 -$size), <br/&gt;        $entities[1],<br/&gt;        ex:entity-inline-annotation(substring($text, ($entities/@end)[1] +2 -$size), $entities[position() &amp;gt;1], ($entities/@end)[1] +1))<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text ,<br>&nbsp; $entities ,<br>&nbsp; $size)<br><br></li></ul><p> Creates entities inline annotations in a given string</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li><li>$entities - list of entities found in the given string<br></li><li>$size - size of the remaining string<br></li></ul><li>Return:</li><ul><li> XML document with a list of entities recognized </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">none</td><td>count</td></tr><tr><td>position</td></tr><tr><td>substring</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#entity-inline-annotation">entity-inline-annotation</a></td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.zorba-xquery.com/modules/data-extraction</td><td><a href="#entities-inline">entities-inline</a></td></tr><tr><td><a href="#entity-inline-annotation">entity-inline-annotation</a></td></tr></table></div></div>&nbsp;<div id="relations" class="methoddetail"><h5><a name="relations"></a>relations</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ex:relations($text){<br/&gt;    let $uri := concat(&#34;http://query.yahooapis.com/v1/public/yql?q=&#34;, <br/&gt;        encode-for-uri(concat(&#34;select * from contentanalysis.analyze where text=&#34;, concat(&amp;apos;&#34;&amp;apos;, concat($text, &amp;apos;&#34;&amp;apos;)))))<br/&gt;    let $response := http:post($uri,&#34;&#34;)[2]<br/&gt;    let $relations := $response/query/results/*:entities/*:entity/*:related_entities<br/&gt;    return if ($relations) then &amp;lt;ex:relations&amp;gt;{<br/&gt;        for $relation in $relations<br/&gt;        order by xs:integer($relation/../*:text/@start)<br/&gt;        return &amp;lt;ex:relation&amp;gt;{<br/&gt;            (let $type := <br/&gt;                for $type in $relation/..//*:types/*:type<br/&gt;                return substring($type, 2)<br/&gt;            return if($relation/..//*:types) then<br/&gt;                &amp;lt;ex:entity start=&#34;{$relation/../*:text/@start}&#34; end=&#34;{$relation/../*:text/@end}&#34; type=&#34;{$type}&#34;&amp;gt; {$relation/../*:text/text()} &amp;lt;/ex:entity&amp;gt;<br/&gt;                else &amp;lt;ex:entity start=&#34;{$relation/../*:text/@start}&#34; end=&#34;{$relation/../*:text/@end}&#34;&amp;gt; {$relation/../*:text/text()} &amp;lt;/ex:entity&amp;gt;)<br/&gt;            union<br/&gt;            (for $link in $relation/*:wikipedia/*:wiki_url<br/&gt;            return &amp;lt;ex:wikipedia_url&amp;gt;{$link/text()}&amp;lt;/ex:wikipedia_url&amp;gt;)<br/&gt;        }&amp;lt;/ex:relation&amp;gt;<br/&gt;    }&amp;lt;/ex:relations&amp;gt; else ()<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $text)<br><br></li></ul><p> Uses Yahoo's Content Analysis webservice to return a list of relations  between entities encountered in the xml or text supplied as input.</p><ul><li>Parameters:</li><ul><li>$text - XML document or string to be analyzed<br></li></ul><li>Return:</li><ul><li> XML document with a list of relations recognized @example test/Queries/data-extraction/relations.xq </li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.zorba-xquery.com/modules/http-client</td><td>post</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">none</td><td>concat</td></tr><tr><td>encode-for-uri</td></tr><tr><td>substring</td></tr></table></div></div>&nbsp;</div>&nbsp;<div align="left"><i>Created by xqDoc-Lite version 1.0 on Tue Apr 24 10:09:39 WEST 2012</i></div></body></html>